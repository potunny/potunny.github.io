<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="cookieicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fortune Cookie</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #333;
            position: relative;
        }
        .centered {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .cookie-img {
            width: 200px;
            margin-bottom: 20px;
        }
        #showbutton {
            padding: 10px 20px;
            font-size: 18px;
            font-family: 'Comic Neue', 'Poppins', sans-serif;
            color: #ffffff;
            background: linear-gradient(135deg, #33022f, #cc42d1, #f1b43a);
            border: none;
            border-radius: 32px;
            cursor: pointer;
            transition: transform 0.15s ease, box-shadow 0.2s ease;
            font-weight: 600;
            letter-spacing: 0.8px;
            position: relative;
            overflow: hidden;
        }
        #showbutton:active {
            transform: scale(0.96);
            box-shadow: 0 4px 8px rgba(255, 144, 188, 0.3);
        }
        #fortune {
            margin-top: 20px;
            font-size: 22px;
            color: #ffe066;
            font-family: 'Cinzel', 'Roboto', Arial, sans-serif;
            font-weight: 700;
            letter-spacing: 1.5px;
            text-shadow: 0 2px 8px #222, 0 0px 24px #ffe066;
            background: linear-gradient(90deg, rgba(255,224,102,0.12) 0%, rgba(66,133,244,0.08) 100%);
            border-radius: 16px;
            padding: 18px 32px;
            box-shadow: 0 4px 24px rgba(66,133,244,0.12);
            transition: background 0.3s, color 0.3s;
            display: none; /*hidden until cookie is cracked*/
        }

        #fortune.active { /*when active, shows magical css above for phrase*/
            display: inline-block;
        }  
        .topbar {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            width: 100%;
            padding: 0px;
            box-sizing: border-box;
        }
        #buycredbutton {
            padding: 10px 20px;
            font-size: 18px;
            font-family: 'Comic Neue', 'Poppins', sans-serif;
            color: #fff;
            background: linear-gradient(135deg, #33022f, #cc42d1, #f1b43a);
            border: none;
            border-radius: 32px;
            box-shadow: 0 6px 12px rgba(255, 144, 188, 0.4),
                        0 0 12px rgba(255, 192, 217, 0.6);
            cursor: pointer;
            transition: transform 0.15s ease, box-shadow 0.2s ease;
            font-weight: 600;
            letter-spacing: 0.8px;
            position: relative;
            overflow: hidden;
        }
        
        #buycredbutton:disabled { /*disable button styling*/
            background: #e0e0e0;
            color: #aaa;
            cursor: auto;
            box-shadow: none;
}
        .buy-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #purchaseMsg {
            color: #ff3b47;
            font-weight: 300;
            font-family: 'Roboto', Arial, sans-serif;
            margin-top: 4px;
            min-height: 20px;
            text-align: center;
            position: static;
            padding: 2px;
        }
        #warnMsg {
            color: #ff3b47;
            font-weight: 300;
            font-family: 'Roboto', Arial, sans-serif;
            margin-top: 10px;
        }
        #cookieimage {
            width: 300px;
            margin-bottom: 20px;
            transition: transform 0.3s ease;
        }
        #cookieimage.cracked {
    /* Create a deep glow using a multi-layer box-shadow */
        box-shadow: 
            0 0 10px 5px #ff90bc, /* A soft pink inner glow */
            0 0 20px 10px #ffe066, /* A brighter yellow glow */
            0 0 30px 15px #cc42d1; /* A magical purple outer halo */
        
        /* Add a filter for a subtle color boost and extra blur */
        filter: brightness(1.2) blur(0.8px);
        transform: scale(1.04); /* Slightly enlarge the image */
        transition: transform 0.3s ease, box-shadow 0.3s ease, filter 0.3s ease;
        margin-bottom: 60px;
        }
    </style>
</head>
<body>
    <div class="topbar">
        <div class="buy-wrapper">
            <button id="buycredbutton" onclick="buyCookie()">Buy One Cookie</button>
            <span id="purchaseMsg"></span>
        </div>
    </div>
    <div class="centered">
        <img id = "cookieimage" src="realcookie.png" alt="Fortune Cookie"">
        <button id="showbutton" onclick="showFortune()">Crack Cookie</button>
        <p id="fortune"></p>
        <span id="warnMsg"></span>
    </div>
    <script>
// Buying
    let hasCookie = false;
    let cookiesBought = 0; //to know when to show you have no money message
function buyCookie() {
    cookiesBought++; //add one cookie
    hasCookie = true;
    document.getElementById("buycredbutton").disabled = true; //disables button after purchase
    document.getElementById("purchaseMsg").innerText = "Cookie purchased!";
    document.getElementById("warnMsg").innerText = "";
}

function showFortune() { //and changes cookie picture
    if (hasCookie) {
        const fortune = generateFortune();
        const fortuneEl = document.getElementById("fortune");
        fortuneEl.innerText = fortune;
        fortuneEl.style.display = "inline-block"; // reveal with styling
        document.getElementById("fortune").innerText = generateFortune();
        document.getElementById("purchaseMsg").innerText = "";
        document.getElementById("warnMsg").innerText = "";

        // Change cookie image to cracked version
        const cookieImage = document.getElementById("cookieimage");
        cookieImage.src = "openedcookie.jpg";
        cookieImage.classList.add("cracked"); 

        hasCookie = false;
    } else {
        if (cookiesBought > 0) {
            document.getElementById("warnMsg").innerText = "Sorry, you only had enough money for one cookie.";
        } else
        document.getElementById("warnMsg").innerText = "You didn't buy a cookie!";
    }
}
// Fortune Generation
    const templates = [
      "A {adj} {animal} will {action} {object}.",
      "Beware: the {animal} of {place} seeks your {object}.",
      "Tonight, a {adj} shadow will {action} {object}.",
      "A {animal} whispers: '{prophecy}'.",
      "In {place}, your {object} shall be {action}ed by a {adj} {animal}.",
      "The {adj} {animal} hides a secret about your {object}."
    ];
    const adjectives = [
      "mysterious", "spooky", "sparkly", "forgotten", "ancient",
      "gentle", "chaotic", "eternal", "sleepy", "restless"
    ];
    const animals = [
      "bat", "crow", "cat", "bunny", "serpent",
      "ghost", "owl", "wolf", "butterfly", "dragon"
    ];
    const actions = [
      "bless", "steal", "haunt", "guard", "whisper to",
      "follow", "curse", "reveal", "embrace", "watch over"
    ];
    const objects = [
      "your dreams", "your secrets", "your heart", "your tea",
      "your shadow", "your path", "your future", "your playlist",
      "your blanket", "your reflection"
    ];
    const places = [
      "the forest", "the old castle", "the graveyard",
      "the hidden cave", "the midnight sky", "the river of time",
      "the library of echoes"
    ];
    const prophecies = [
      "The veil is thin tonight...",
      "What you seek also seeks you.",
      "A strange gift approaches.",
      "Your reflection hides a truth.",
      "Beware of glitter in the dark.",
      "An old friend returns in silence.",
      "Your shadow walks ahead of you."
    ];
    function getRandomElement(arr) {
      return arr[Math.floor(Math.random() * arr.length)];  
    }
    function generateFortune() {
      let template = getRandomElement(templates);
      return template
      .replace("{adj}", getRandomElement(adjectives))
      .replace("{animal}", getRandomElement(animals))
      .replace("{action}", getRandomElement(actions))
      .replace("{object}", getRandomElement(objects))
      .replace("{place}", getRandomElement(places))
      .replace("{prophecy}", getRandomElement(prophecies));
    }
    </script>
</body>
</html>